# 🎯 实时人脸检测系统 (分享版)

基于YOLO11的高性能实时人脸检测与计数系统

---

## 🚀 快速开始

### 方法一：一键安装运行 (推荐)
1. **双击 `install.bat`** - 自动安装所有依赖
2. **双击 `run.bat`** - 启动人脸检测系统

### 方法二：手动安装
```bash
# 1. 安装依赖
pip install -r requirements.txt

# 2. 启动程序
python realtime_face_detection.py
```

---

## ✨ 主要特性

### 🔥 核心功能
- **🎯 智能人脸检测**: 基于YOLO11的高精度人脸识别
- **📱 多摄像头支持**: 自动检测并支持切换多个摄像头
- **👥 实时人脸计数**: 精确统计当前画面中的人脸数量
- **⚡ 性能监控**: 实时显示FPS性能指标
- **📸 智能截图**: 一键保存检测结果，文件名包含人脸数量

### 🎨 用户界面
- **信息面板**: 半透明顶部显示所有关键信息
- **镜像模式**: 摄像头画面水平翻转，符合镜子使用习惯
- **实时统计**: 大号绿色字体显示人脸数量
- **控制提示**: 右上角显示操作按键说明

---

## 🎮 操作控制

| 按键 | 功能描述 |
|------|----------|
| **Q** | 退出程序 |
| **C** | 切换到下一个可用摄像头 |
| **S** | 保存当前画面截图 |

---

## 📊 界面说明

### 信息面板内容
- **标题**: "Real-time Face Detection"
- **人脸计数**: "Faces Detected: X" (绿色大字显示)
- **性能指标**: "FPS: XX.X" (实时帧率)
- **摄像头信息**: "Camera: X (Y available)" 
- **模型信息**: "Model: 模型类型"
- **操作提示**: 右侧控制说明

### 自动截图功能
- **命名规则**: `face_detection_screenshot_YYYYMMDD_HHMMSS_faces_X.jpg`
- **保存位置**: 程序运行目录
- **内容**: 包含检测框和信息面板的完整画面

---

## 🔧 系统要求

### 硬件要求
- **摄像头**: USB摄像头或内置摄像头
- **内存**: 至少4GB RAM
- **处理器**: 支持AVX指令集 (2010年后的CPU)

### 软件要求
- **操作系统**: Windows 10/11, macOS, Linux
- **Python**: 3.8+ (推荐3.9+)
- **摄像头驱动**: 确保摄像头可在其他应用中正常使用

---

## 🎯 模型说明

系统支持多种模型，按优先级自动选择：

1. **专用人脸检测模型** (最高精度)
   - 如果提供了专门训练的人脸检测模型
   - 检测精度最高，专门针对人脸优化

2. **通用YOLO11模型** (兼容性最好)
   - 系统默认使用`yolo11n.pt`
   - 首次运行时自动下载
   - 可检测人员和其他目标

### 模型自动下载
- 首次运行时，系统会自动下载YOLO11n模型 (~6MB)
- 下载需要网络连接，请确保网络畅通
- 下载完成后，后续使用无需网络

---

## 🛠️ 故障排除

### 常见问题

**Q1: 提示"No cameras found"**
- 检查摄像头是否已连接并被系统识别
- 确认摄像头没有被其他应用占用
- 重新连接USB摄像头

**Q2: 程序启动缓慢**
- 首次运行需要下载模型文件，请耐心等待
- 检查网络连接是否正常

**Q3: 检测不到人脸**
- 确保光线充足
- 人脸朝向摄像头
- 调整与摄像头的距离

**Q4: FPS过低**
- 关闭其他占用摄像头的应用
- 降低摄像头分辨率
- 检查CPU使用率

### 环境问题
**安装依赖失败**:
```bash
# 使用国内镜像源
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

**Python版本问题**:
- 确保使用Python 3.8+版本
- Windows用户推荐从官网下载最新版本

---

## 📱 使用技巧

### 最佳使用体验
1. **光线**: 确保充足且均匀的光线
2. **距离**: 保持1-3米的检测距离
3. **角度**: 人脸正对摄像头效果最佳
4. **环境**: 避免复杂背景干扰

### 截图技巧
- 按`S`键可保存包含检测结果的截图
- 截图文件名包含时间戳和检测到的人脸数量
- 可用于记录检测效果或制作演示材料

---

## 📞 技术支持

如果遇到问题，可以：
1. 查看上方的故障排除部分
2. 检查控制台输出的错误信息
3. 确认所有依赖已正确安装

---

## 📄 许可证

本项目仅供学习和研究使用。

---

**🎉 享受你的人脸检测体验！** 